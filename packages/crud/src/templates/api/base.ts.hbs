import { handlersFactory } from "@appril/crud";

import { {{declaredName}} as table } from "{{sourceFolder}}/../{{dbxBase}}/{{schema}}";

export default handlersFactory<
  "{{dbxBase}}:{{name}}",
  import("{{dbxBase}}:{{name}}").RecordT,
  import("{{dbxBase}}:{{name}}").InsertT,
  import("{{dbxBase}}:{{name}}").UpdateT,
  import("{{dbxBase}}:{{name}}").RecordT["{{primaryKey}}"]
>(
  table,
  {
    primaryKey: "{{primaryKey}}",
    columns: [
      {{#each regularColumns}}
      "{{name}}",
      {{/each}}
    ],
    zodSchema(z) {
      return {
        {{#each columns}}
        {{#if zodSchema}}
        {{name}}: {{zodSchema}},
        {{/if}}
        {{/each}}
      }
    },
  },
);
